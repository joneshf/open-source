package(
    default_visibility = ["//visibility:public"],
)

load(
    "@ai_formation_hazel//:hazel.bzl",
    "hazel_library",
)

load(
    "@io_tweag_rules_haskell//haskell:haskell.bzl",
    "haskell_cc_import",
    "haskell_library",
)

cc_library(
    hdrs = glob(
        [
            "cbits/*.h",
        ],
    ),
    name = "cbits",
    srcs = glob(
        [
            "cbits/*.c",
        ],
    ),
    strip_include_prefix = "cbits",
)

haskell_library(
    deps = [
        ":cbits",
        hazel_library("base"),
        hazel_library("bytestring"),
    ],
    name = "zlib",
    srcs = glob([
        "Codec/Compression/*.hs",
        "Codec/Compression/Zlib/*.hs",
        "Codec/Compression/Zlib/*.hsc",
    ]),
)
